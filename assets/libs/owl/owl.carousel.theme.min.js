/**
 * Custom OWL in theme
 */
(function ($) {
    "use strict";
    $(window).on('load',function () {
        /* add first/last/center class */
        function alacarte_owl_flc(e) {
            var idx = $(e.target).find('.owl-item');
            idx.removeClass('first last center'), 
            idx.eq(e.item.index).addClass('first'), 
            idx.eq(e.item.index + e.page.size - 1).addClass('last');

            /* add counter x/y for next/prev */
            var carousel = e.relatedTarget;
            $('.owl-next .nav-count').text(carousel.relative(carousel.current()) + 1 + '/' + carousel.items().length);
            $('.owl-prev .nav-count').text(carousel.relative(carousel.current()) + '/' + carousel.items().length);

            // Remove loading
            $('.loader').remove();
        }
        setTimeout(function () {
            $(".red-owl").each(function () {
                var $this = $(this),
                    slide_id = $this.attr('id'),
                    slider_settings = alacarte_owl[slide_id];
                    slider_settings['navContainer'] = $this.parent().find('.red-owl-nav');
                    slider_settings['dotsContainer'] = $this.parent().find('.red-owl-dots');
                    console.log(slider_settings);
                $this.on("initialized.owl.carousel", function(e) {
                   alacarte_owl_flc(e);

                }),
                $this.owlCarousel(slider_settings),
                $this.on("changed.owl.carousel", function(e) {
                    alacarte_owl_flc(e)
                })
            });
        }, 500 );
    });
})(jQuery)